CRIMSON VEIL - FEATURE ROADMAP
================================

CURRENT SPRINT: "Storage & Organization" (Next 1-2 weeks)
----------------------------------------------------------
Sprint Goal: Enable players to organize and store resources beyond 32-slot inventory limit

PRIORITY 1 - Storage Containers (Core Feature)
[X] Container placement system - Place chests as building blocks
[X] Container inventory management - Each chest has independent inventory
[X] Container interaction - Click to open, transfer items (interaction working, UI pending)
[ ] Container UI - Dual-panel interface (container left, player right) [IN PROGRESS - Phase 2]
[X] Container collision and physics - Proper world placement
[X] Container visual design - Low-poly chest mesh with 16x16 texture
[X] Controller support - Open containers with gamepad

PRIORITY 2 - Inventory Improvements (Quality of Life)
[X] Item stacking - Wood (100), Stone (50), Food (20) stack limits
[X] Auto-stack on pickup - Merge with existing stacks automatically
[X] Stack count display - Visual indication of stack size
[X] Inventory persistence - Stacks maintain across sessions (in-memory for now)

PRIORITY 3 - Workbench Foundation (Progression Gate)
[ ] Workbench placement - Craftable building block (10 wood + 5 stone)
[ ] Workbench visual design - Low-poly table/bench model
[ ] Proximity detection - Check player within 5m radius
[ ] Crafting UI integration - Show "Requires Workbench" on locked recipes

DEFERRED TO NEXT SPRINT:
[ ] Sort/Quick-stack buttons - Inventory organization helpers
[ ] New workbench recipes - Advanced crafting options (need design)
[ ] Container animations - Open/close lid animations
[ ] Drag-and-drop UI - Enhanced item transfer (start with click-to-move)
[ ] Container destruction/harvesting - Get materials back


DESIGN DECISIONS FOR THIS SPRINT:
----------------------------------
Ã¢Å“â€¦ Container UI: Click-to-transfer (simple), defer drag-and-drop
Ã¢Å“â€¦ Container scope: Harvestable chests (can break, get wood back, items drop)
Ã¢Å“â€¦ Stacking: Full implementation this sprint (critical for storage value)
Ã¢Å“â€¦ Workbench: Placement + proximity only, defer recipe gating to next sprint


NEXT UP (After Current Sprint)
-------------------------------
[ ] Workbench recipes - 5+ new recipes requiring workbench proximity
[ ] Sort/Quick-stack buttons - Complete inventory QoL features
[ ] Container visual polish - Animations, texture variations
[ ] Combat system - Basic enemy encounters with simple weapons
[ ] Save/load system - Persistent world state (HIGH PRIORITY after storage works)


BACKLOG (Prioritized)
---------------------
HIGH PRIORITY:
[ ] Save/load system - Persistent world state and player progress (NEXT after storage)
[ ] Boss progression system - Valheim-style boss encounters that gate biome access
[ ] Advanced building - Walls, roofs, furniture for proper base construction
[ ] Tool tiers - Stone Ã¢â€ â€™ Iron Ã¢â€ â€™ Steel progression path
[ ] Durability system - Tools degrade with use (creates resource sink)

MEDIUM PRIORITY:
[ ] Unique landmarks - Procedurally placed points of interest for discovery and exploration
[ ] Animal AI improvements - More realistic critter behaviors (feeding, fleeing, nesting)
[ ] Weather system - Rain, snow, storms that affect gameplay
[ ] Farming system - Plant crops, tend gardens for renewable food
[ ] NPC traders - Buy/sell resources, discover rare items
[ ] Character customization - Appearance options for player model
[ ] Controller UI navigation - D-Pad navigation through inventory/crafting menus with visual focus

LOW PRIORITY:
[ ] Performance stats UI - Display FPS, CPU, GPU, and memory usage in upper right corner
[ ] Custom skybox - Replace ProceduralSkyMaterial with custom texture/cubemap for enhanced atmosphere
[ ] Snow covered trees in snow biome - Visual enhancement for winter atmosphere
[ ] Multi-material terrain rendering - Replace vertex color tinting (see chunk.gd:231)
[ ] Seasonal changes - Visual and gameplay shifts throughout the year
[ ] Fishing system - Coastal/river fishing for food variety
[ ] Mounts/vehicles - Faster travel options for exploring large biomes
[ ] Music system - Ambient tracks that match biome/time of day
[ ] Controller rumble - Haptic feedback for harvesting, damage, and building


SOMEDAY/MAYBE (Ideas to explore)
---------------------------------
- Multiplayer co-op - Shared world building with friends
- Magic/enchanting system - Mystical progression path
- Underground/cave generation - Deeper exploration with mining
- Pet system - Tamed critters that follow and help
- Treasure hunting - Buried loot and rare discoveries
- Photography mode - Capture and share scenic moments
- Container networks - Auto-sorting/piping systems
- Named containers - Label chests for organization
- Container security - Locks or ownership system


COMPLETED (Recent)
------------------
[X] Container placement system - Chests placeable as building blocks (10 wood cost)
[X] Container interaction - E key or A button opens chest within 3m, context-sensitive A button
[X] Container highlighting - Green outline when looking at chest (Layer 3 collision)
[X] Container removal warning - Dialog confirms removal when chest has items
[X] Independent container inventories - Each chest has own 32-slot Inventory instance
[X] Low-poly chest visual - Procedural mesh with 16x16 wood/metal texture
[X] D-Pad input conflict resolved - Removed D-Pad from movement, dedicated to building controls
[X] Item stacking system - Stack limits enforced (wood: 100, stone: 50, food: 20, tools: 1) with visual feedback
[X] Stack count display - Shows "current/max" format, red "FULL" indicator when maxed
[X] Inventory full notification - On-screen alert when trying to exceed stack limits
[X] Inventory UI scene - Created inventory_ui.tscn for proper rendering
[X] Xbox controller support - Full analog movement/camera, all buttons mapped, simultaneous keyboard+controller support
[X] Tool cycling improvement - Removed "None" option, now only cycles Axe Ã¢â€ â€ Pickaxe
[X] Valheim-style log breaking physics - Trees break into 3-5 log pieces on impact with satisfying scatter
[X] Impact-based tree shattering - Logs spawn when fallen tree collides with terrain/objects
[X] Log despawn particles - Brown particle "poof" effects when logs disappear (1-4 second randomized lifetimes)
[X] Removed tree stumps - Clean world, better performance, avoids clutter issues
[X] Health/hunger system - Stats management, regeneration when well-fed (hunger > 70), movement penalties when hungry, eating from inventory
[X] Biome configuration system - Inspector controls for biome size, thresholds, and vegetation densities per biome
[X] Guaranteed Grassland spawn zone - Valheim-style safe spawn with configurable radius
[X] Biome-specific vegetation distributions - Each biome has unique tree types and signature resources
[X] Code refactoring - Extracted tree generators from vegetation_spawner (reduced from 2,075 to 1,457 lines)
[X] Inventory UI - Grid-based visual inventory (Tab to toggle), 32 slots with item icons and counts
[X] Crafting system - Recipe-based crafting with UI (Press R), 5 starter recipes (stone tools, campfire, torch, wood wall)
[X] Perlin noise cloud system - Dual-layer noise for organic cloud shapes with Inspector parameters
[X] Enhanced crosshair - Cross-shaped design with outline for visibility on all backgrounds
[X] Sun/moon depth sorting fix - Repositioned celestial bodies to z=Ã‚Â±500 for proper rendering order
[X] Tool system - Axe/Pickaxe with requirement checking and visual feedback
[X] Procedural world generation - Chunk-based terrain with FastNoiseLite
[X] Day/night cycle with pixelated sun/moon - Time-based sky colors and celestial bodies
[X] Harvestable resources - Trees, strawberries, mushrooms with proper collision
[X] Harvest particles - Minecraft-style pixel "poof" effects when gathering
[X] Harvest UI feedback - Progress bar and resource name display
[X] Tree falling physics - Trees tip over when chopped down (Valheim-style)
[X] Resource night glow - Mushrooms and strawberries emit light at night
[X] Critter spawning - Rabbits, deer, birds, lizards, crabs with procedural placement
[X] Settings menu - Resolution, fullscreen, vsync, MSAA, quality presets
[X] Water plane - Infinite ocean with collision for walking
[X] Visual polish - Clouds, crosshair, harvest highlights, tree physics


DESIGN QUESTIONS / DECISIONS NEEDED
------------------------------------
Sprint Planning Decisions (Made):
Ã¢Å“â€¦ Storage scope: Core + Polish approach (1 week timeline)
Ã¢Å“â€¦ Container UI: Click-to-transfer first, drag-and-drop later
Ã¢Å“â€¦ Container destruction: Harvestable (break to get materials back)
Ã¢Å“â€¦ Item stacking: Full implementation this sprint
Ã¢Å“â€¦ Workbench scope: Placement + proximity, defer recipe gating

Future Decisions (Still Open):
? Should tools degrade/break or have infinite durability? (affects resource loops)
? What should unlock new biomes - boss kills or tool upgrades? (progression pacing)
? Should building have structural integrity like Valheim or free placement like Minecraft?
? How rare should character trees be? (currently 5% - too common or too rare?)
? Should critters be harvestable for food/materials or purely ambient?
? Should controller vibration intensity be configurable in settings?
? Container limits: How many containers can exist in world simultaneously?
? Workbench limits: One per player or unlimited placement?


TECHNICAL DEBT / REFACTORING
-----------------------------
[X] Code organization - Extracted large tree generators into modular files (COMPLETE)
[ ] Multi-material terrain system - Replace vertex color tinting with proper material blending (chunk.gd)
[ ] Settings preset detection - "Custom" preset detection could be more robust
[ ] Resource spawning optimization - Could batch-spawn resources instead of one-at-a-time
[ ] Chunk unloading delay - Add graceful fade-out before unloading distant chunks
[ ] Critter spawner refactoring - Could extract critter visual generators (same pattern as vegetation)
[ ] Container persistence architecture - Design for future save/load system


BUGS / FIXES
------------
[X] Sun/moon seem to change sizes as I explore - FIXED
[X] Crabs still don't seem to spawn - FIXED
[X] Rocks are not glowing (blue-ish) at night (should behave just like mushrooms) - FIXED
[X] Trees sometimes breaking too early before hitting ground - FIXED (improved collision timing)
[X] Logs clipping through terrain - FIXED (spawn height adjustment, CylinderShape collision)


SPRINT RISK ASSESSMENT
-----------------------
Ã°Å¸â€Â´ HIGH RISK: Container UI complexity (dual-panel, transfer logic)
   Mitigation: Start simple with click-to-transfer, add features incrementally
   
Ã°Å¸Å¸Â¡ MEDIUM RISK: Save compatibility for stacking changes
   Mitigation: Design inventory structure with future save system in mind
   
Ã°Å¸Å¸Â¡ MEDIUM RISK: Controller UI navigation for containers
   Mitigation: Mouse/keyboard first, controller support second pass
   
Ã°Å¸Å¸Â¢ LOW RISK: Feature creep
   Mitigation: Stick to acceptance criteria, defer extras to backlog


---
Notes:
- Project follows Valheim/Minecraft aesthetic: low-poly + 16x16 pixel textures
- Core loop: Explore Ã¢â€ â€™ Gather Ã¢â€ â€™ Craft Ã¢â€ â€™ Build Ã¢â€ â€™ Unlock new biomes Ã¢â€ â€™ Repeat
- Tone: Cozy loneliness with meditative gathering and discovery moments
- All features should support "one more trip" addictive gathering loop
- Full controller support implemented - keyboard+mouse and Xbox controller work simultaneously
- Sprint planning focuses on "Core + Polish" approach: deliver complete, polished features over rushed completeness
