CRIMSON VEIL - ROADMAP

CURRENT: v0.6.0 "Hunter & Prey" (0/12 tasks - 0%) ðŸŽ¯ IN PLANNING
========================================================================

DESIGN DECISIONS (LOCKED):
âœ“ Combat Style: Streamlined First-Person Action (Option B.5)
âœ“ Attack Types: Light (tap) + Heavy (charge 1.5s) + Dodge (dash with i-frames)
âœ“ Weapons: Melee (wooden club, stone spear, bone sword) + Ranged (bow & arrow)
âœ“ Enemies: 6 types across all biomes (primitives + AI textures)
âœ“ Enemy Roster: Corrupted Rabbit, Forest Goblin, Desert Scorpion, Ice Wolf, Stone Golem, Shadow Wraith
âœ“ Critters: Stay peaceful (no hostile variants)
âœ“ Controller: Full dual M+KB/gamepad support with context-sensitive buttons
âœ“ Visual Style: CSG primitives + AI-generated textures
âœ“ Audio: 32 combat sounds via SFX Engine (8 player + 24 enemy)
âœ“ Death Penalty: Respawn at spawn, keep items (forgiving for v0.6.0)
âœ“ Bow Mechanics: Hitscan with charge (hold to draw, release to fire)

SPRINT v0.6.0 - TASKS:
[ ] 1.1 - Combat System Foundation (4h)
      â†’ Create CombatSystem.gd (attack/charge/dodge mechanics)
      â†’ Weapon.gd resource class (damage, range, cooldown properties)
      â†’ Integration with player.gd input handling
      â†’ Camera effects (shake, bob, recoil)
      
[ ] 1.2 - Melee Attack System (5h)
      â†’ Light attack (tap, 1s cooldown)
      â†’ Charge attack (hold 1.5s, 2x damage, heavy feedback)
      â†’ Targeting system (raycast + soft auto-aim for controller)
      â†’ Hit detection and damage application
      â†’ Visual feedback (crosshair states, charge vignette)
      
[ ] 1.3 - Dodge System (3h)
      â†’ Dodge dash (Space + direction = 4m dash)
      â†’ I-frame system (0.3s invincibility)
      â†’ Context-sensitive A button (dodge vs jump vs interact)
      â†’ Controller integration (full stick support)
      â†’ Cooldown tracking (3s between dodges)
      
[ ] 1.4 - Melee Weapons (2h)
      â†’ Wooden Club (15/30 damage, 2.5m range, starter)
      â†’ Stone Spear (20/40 damage, 3.5m range, balanced)
      â†’ Bone Sword (25/50 damage, 3.0m range, endgame)
      â†’ Crafting recipes (club: woodÃ—5, spear: woodÃ—3+stoneÃ—2+leatherÃ—1, sword: woodÃ—2+boneÃ—4)
      â†’ Weapon switching system (T key / RB button)
      
[ ] 1.5 - Bow & Arrow System (4h)
      â†’ Bow charge mechanics (hold RT/LMB to draw)
      â†’ Hitscan arrow (instant hit, 15-40 damage based on charge)
      â†’ Arrow ammo tracking (craft: woodÃ—1+stoneÃ—1 = 5 arrows)
      â†’ Charge UI indicator (fills as bow draws)
      â†’ Audio feedback (bow creak while charging, twang on release)
      
[ ] 2.1 - Enemy Base Class (5h)
      â†’ Enemy.gd extends CharacterBody3D
      â†’ Health, damage, movement, detection systems
      â†’ State machine (Idle â†’ Chase â†’ Attack â†’ Death)
      â†’ Drop table system (items on death)
      â†’ Flash effects (white on hit, red on telegraph)
      â†’ Knockback system
      
[ ] 2.2 - Enemy Types (6 variants) (10h)
      â†’ Corrupted Rabbit (Forest, 30 HP, territorial, fast)
      â†’ Forest Goblin (Forest, 50 HP, hostile, patrols, flees at 20% HP)
      â†’ Desert Scorpion (Desert, 60 HP, ambush from sand)
      â†’ Ice Wolf (Snow, 55 HP, pack tactics, spawns in groups of 2-3)
      â†’ Stone Golem (Mountain, 100 HP, tank, ground slam)
      â†’ Shadow Wraith (Night-only, 40 HP, floats, despawns at dawn)
      â†’ CSG primitive geometry for all
      â†’ Unique drops per enemy (leather, chitin, fangs, cores, etc.)
      
[ ] 2.3 - Enemy AI & Spawning (3h)
      â†’ Chase AI (move toward player, maintain range)
      â†’ Attack patterns (telegraph â†’ strike â†’ cooldown)
      â†’ Pack behavior (Ice Wolves coordinate)
      â†’ Biome-specific spawning (extend CritterSpawner)
      â†’ Time-based spawning (Shadow Wraith night-only)
      â†’ Spawn rates (5-15% per chunk based on enemy type)
      
[ ] 3.1 - Combat Audio Generation (3h)
      â†’ Generate 32 sounds via SFX Engine
      â†’ Player combat: swing_light, swing_heavy, charge_buildup, charge_ready, dodge_whoosh, hit_flesh, hit_stone, player_grunt
      â†’ Enemy sounds: 4 per enemy (ambient, attack, hit, death) Ã— 6 enemies = 24 sounds
      â†’ Integration with AudioManager variation system
      â†’ Configure sound categories and volumes
      
[ ] 3.2 - AI Texture Generation (2h)
      â†’ Generate 5 enemy textures via Leonardo.ai/DALL-E
      â†’ Corrupted fur (dark red-brown, diseased)
      â†’ Goblin skin (mottled green, rough)
      â†’ Scorpion chitin (sandy yellow, segmented)
      â†’ Wolf fur (white, icy blue tint, frost)
      â†’ Stone with magma (gray, orange glowing cracks)
      â†’ Apply to CSG primitive materials
      â†’ Configure texture filtering (nearest for pixel art look)
      
[ ] 3.3 - Visual Effects & Feedback (3h)
      â†’ Hit particles (burst at impact point, color-coded by enemy)
      â†’ Crosshair states (default, targeting, charging, ready)
      â†’ Charge vignette (screen darkens as attack charges)
      â†’ Screen flash (red when taking damage)
      â†’ Death fade (enemies dissolve over 0.5s)
      â†’ Camera shake presets (light hit, heavy hit, ground slam)
      
[ ] 4.1 - Player Death & Respawn (2h)
      â†’ Death detection (health <= 0 in HealthHungerSystem)
      â†’ Death screen UI ("YOU DIED" + respawn button)
      â†’ Respawn at world spawn (0, Y, 0)
      â†’ Full health/hunger restoration
      â†’ Keep all items (forgiving for now)
      â†’ Death sound + fade to black effect
      
[ ] 4.2 - Combat Rumble & Polish (2h)
      â†’ Add combat rumble presets to RumbleManager
      â†’ attack_light, attack_heavy, dodge, player_hit, enemy_death, bow_release
      â†’ Continuous rumble while charging (bow/melee)
      â†’ Integration at all combat interaction points
      â†’ Button hints UI (auto-switch M+KB vs controller)
      â†’ Charge bar UI (bottom-right, shows attack/bow charge)
      â†’ Final balance pass (damage numbers, enemy HP, cooldowns)

SPRINT ACHIEVEMENTS (Target):
âœ“ Complete combat system (melee + ranged)
âœ“ 6 enemy types across all biomes
âœ“ Bow & arrow with charge mechanics
âœ“ Full controller support (dual input)
âœ“ 32 combat sounds (AI-generated)
âœ“ AI-textured enemies (5 unique textures)
âœ“ Death/respawn system
âœ“ Professional combat feel (rumble, effects, audio)

TOTAL ESTIMATED TIME: ~48 hours (1-2 weeks solo dev)

TASK BREAKDOWN:
Phase 1 - Combat Core: Tasks 1.1-1.5 (18h) - Attack, dodge, weapons, bow
Phase 2 - Enemies: Tasks 2.1-2.3 (18h) - Enemy class, 6 types, AI/spawning
Phase 3 - Audio & Visual: Tasks 3.1-3.3 (8h) - Sounds, textures, effects
Phase 4 - Integration: Tasks 4.1-4.2 (4h) - Death system, rumble, polish

IMPLEMENTATION NOTES:

COMBAT SYSTEM:
- Attack input: LMB/RT (tap = light, hold 1.5s = charge)
- Dodge input: Space/A + direction (context-sensitive with jump/interact)
- Weapon cycle: T/RB
- Attack range: 2.5-3.5m depending on weapon
- Charge vignette: Screen darkens, FOV narrows, shake builds
- Hit detection: Raycast from camera, soft auto-aim for controller (30Â° cone)
- Damage numbers: Optional floating text (can add in polish pass)

BOW SYSTEM:
- Draw mechanic: Hold LMB/RT to charge (2s max)
- Damage scaling: 15 (quick shot) â†’ 40 (fully charged)
- Range: 30 meters (hitscan, instant hit)
- Ammo: Arrows (craft wood+stone = 5 arrows)
- Visual: Charge bar fills, crosshair shrinks (accuracy)
- Audio: Bow creak loop while drawing, twang on release
- Can move slowly while charging (-30% speed)

ENEMY BEHAVIORS:
- Corrupted Rabbit: Territorial (attacks if player <5m), fast chase
- Forest Goblin: Hostile patrol, flees at 20% HP, drops varied loot
- Desert Scorpion: Burrow ambush, emerges near player, tail sting attack
- Ice Wolf: Pack spawns (2-3), coordinate attacks, surround player
- Stone Golem: Slow tank, ground slam AoE, guards ore deposits
- Shadow Wraith: Night-only (10 PM-6 AM), floats, transparent shader

ENEMY DROPS:
- Corrupted Rabbit: Corrupted Leather (common), Dark Meat (40%)
- Forest Goblin: Wood (80%), Stone (60%), Goblin Tooth (30% rare)
- Desert Scorpion: Chitin (100%), Venom Sac (25% rare)
- Ice Wolf: Wolf Pelt (100%), Fang (70%), Ice Shard (15% rare)
- Stone Golem: Stone (100%), Iron Ore (60%), Stone Core (20% rare)
- Shadow Wraith: Shadow Essence (80%), Ectoplasm (30% rare)

VISUAL STYLE:
- CSG Primitives: Spheres, boxes, cylinders, capsules, cones
- AI Textures: 512Ã—512 PNG, seamless/tileable, nearest filter
- Materials: StandardMaterial3D, roughness 0.8-0.9, no shine
- Eyes: Small emissive spheres (glowing)
- Effects: GPUParticles3D for hits/deaths, simple colored bursts

AUDIO GENERATION PROMPTS (SFX Engine):
Player:
1. "Quick weapon whoosh, sharp and fast, melee swing"
2. "Heavy powerful swing, deep whoosh with weight, charged attack"
3. "Rising energy hum, building tension, loopable, weapon charging"
4. "Satisfying ding, weapon fully charged indicator"
5. "Quick air whoosh, fast dash movement, dodge sound"
6. "Meaty impact, flesh hit, satisfying thud"
7. "Rock impact, stone breaking, hard surface hit"
8. "Player damage grunt, taking hit, short pain sound"

Enemies (4 per type):
Rabbit: "Corrupted animal growl, hostile, low menacing" / "Rabbit attack hiss" / "Rabbit damage squeak" / "Rabbit death squeal"
Goblin: "Goblin grunt, hostile voice" / "Goblin war cry, club swing" / "Goblin pain grunt" / "Goblin death cry"
Scorpion: "Insect clicking, mandibles, desert" / "Tail whip, stinger strike" / "Chitin crack, exoskeleton" / "Insect death screech"
Wolf: "Wolf howl, pack call, icy echo" / "Wolf snarl, aggressive" / "Wolf yelp, pain" / "Wolf death howl, mournful"
Golem: "Stone grinding, rocks moving, deep bass" / "Heavy rock slam, ground impact" / "Stone cracking, damage" / "Rocks collapsing, final crash"
Wraith: "Ghostly whisper, ethereal, creepy" / "Shadow swoosh, dark energy" / "Ethereal screech, spirit damage" / "Fading wail, dissipating"

TEXTURE GENERATION PROMPTS (Leonardo.ai/DALL-E):
1. "Seamless tileable texture, corrupted animal fur, dark red-brown, diseased patches, matted, 512x512, top-down view, game texture"
2. "Seamless tileable texture, green goblin skin, mottled, warts, rough, fantasy game, 512x512, top-down view"
3. "Seamless tileable texture, scorpion chitin, sandy yellow, segmented plates, desert creature, 512x512, top-down view"
4. "Seamless tileable texture, white wolf fur, icy blue tint, frost patches, winter, 512x512, top-down view, game asset"
5. "Seamless tileable texture, granite stone, gray rock, orange glowing cracks, magma veins, 512x512, top-down view"

CONTROLLER MAPPING:
- RT (Trigger 7): Attack (tap = light, hold = charge)
- LT (Trigger 6): Block (future feature)
- A (Button 0): Dodge/Jump/Interact (context-sensitive)
- B (Button 1): Sprint (existing)
- X (Button 3): Crafting menu (existing)
- Y (Button 4): Inventory (existing)
- RB (Button 5): Cycle weapons
- D-Pad: Quick slots (future)
- Left Stick: Movement (existing)
- Right Stick: Camera (existing)

RUMBLE PRESETS (add to RumbleManager):
- attack_light: {weak: 0.3, strong: 0.0, duration: 0.15}
- attack_heavy: {weak: 0.0, strong: 0.8, duration: 0.3}
- dodge: {weak: 0.4, strong: 0.0, duration: 0.2}
- player_hit: {weak: 0.0, strong: 0.6, duration: 0.25}
- enemy_death: {weak: 0.5, strong: 0.5, duration: 0.4}
- bow_release: {weak: 0.2 + (charge * 0.3), strong: 0.0, duration: 0.2}
- ground_slam: {weak: 0.8, strong: 0.8, duration: 0.5} (Stone Golem)

BALANCE PARAMETERS:
Player:
- Health: 100 HP (existing)
- Move Speed: 5.0 m/s walk, 10.0 m/s sprint (existing)
- Attack Range: 2.5-3.5m (weapon-dependent)
- Dodge Distance: 4.0m
- Dodge I-Frames: 0.3s
- Bow Range: 30m

Weapons:
- Wooden Club: 15 light / 30 heavy, 1.0s cooldown, 2.5m range
- Stone Spear: 20 light / 40 heavy, 1.2s cooldown, 3.5m range
- Bone Sword: 25 light / 50 heavy, 1.0s cooldown, 3.0m range
- Bow: 15-40 damage (charge-based), 30m range, arrow ammo

Enemies (HP / Damage / Speed / Range):
- Corrupted Rabbit: 30 / 8 / 4.5 / 1.5m (dies in 2 light hits or 1 heavy)
- Forest Goblin: 50 / 12 / 3.0 / 2.0m (dies in 3-4 light hits or 2 heavy)
- Desert Scorpion: 60 / 15 / 3.0 / 2.5m (dies in 4 light hits or 2 heavy)
- Ice Wolf: 55 / 14 / 4.5 / 2.0m (dies in 3-4 light hits or 2 heavy)
- Stone Golem: 100 / 20 / 1.5 / 2.5m (dies in 7 light hits or 4 heavy, tank)
- Shadow Wraith: 40 / 12 / 4.0 / 2.0m (dies in 3 light hits or 2 heavy)

TESTING CHECKLIST:
Combat:
[ ] Light attack works with mouse/controller
[ ] Charge attack charges for 1.5s, releases on input release
[ ] Dodge dashes 4m with i-frames (can pass through enemies)
[ ] Weapon switching cycles between club/spear/sword
[ ] Bow charges, fires arrows, consumes ammo
[ ] Hit detection accurate with soft auto-aim on controller
[ ] Damage numbers correct for each weapon/enemy combo
[ ] Knockback pushes enemies back appropriately

Enemies:
[ ] All 6 enemies spawn in correct biomes
[ ] Each enemy has working AI (chase, attack, death)
[ ] Pack behavior works for Ice Wolves (coordinate)
[ ] Shadow Wraith only spawns at night, despawns at dawn
[ ] Enemies drop correct items on death
[ ] Enemy sounds play at appropriate times
[ ] Textures applied correctly to primitives

Controller:
[ ] RT tap = light attack, hold = charge
[ ] A button context-sensitive (dodge/jump/interact)
[ ] Charge bar visible and fills correctly
[ ] Button hints switch automatically M+KB â†” controller
[ ] Rumble triggers on all combat actions
[ ] Continuous rumble while charging attack/bow

Audio/Visual:
[ ] All 32 combat sounds play correctly
[ ] Sound variation system working
[ ] Hit particles spawn at impact points
[ ] Crosshair changes states (targeting, charging, ready)
[ ] Screen effects work (vignette, flash, shake)
[ ] Death screen appears, respawn works

Integration:
[ ] Player death detected at 0 HP
[ ] Respawn restores health, teleports to spawn
[ ] Items kept on death (no drops)
[ ] Combat doesn't break existing systems (harvesting, building)
[ ] No performance issues with 6+ enemies active

POST-RELEASE ADDITIONS (Optional v0.6.1):
[ ] Damage numbers (floating text above enemies)
[ ] Critical hits (10% chance, 2x damage, yellow numbers)
[ ] Enemy ambient sounds (idle growls/clicks)
[ ] Weapon durability (basic wear system)
[ ] Enemy loot rarities (bronze/silver/gold tiers)
[ ] Boss enemies (save for v0.7.0)

KNOWN LIMITATIONS (Address in Future):
- No death penalty (items kept, instant respawn)
- No weapon animations (camera bob only)
- No enemy ragdolls (fade out on death)
- Pack AI simple (no formations/flanking)
- No enemy variants (just one model per type)
- Bow is hitscan (no projectile physics yet)

BACKLOG (POST-v0.6.0):
- Boss enemies (mini-boss per biome)
- Save/load system (CRITICAL for v0.7.0)
- Weapon durability & repair
- Advanced AI (formations, flee, call for help)
- Enemy variants (elite versions, corrupted versions)
- Ranged enemies (goblin archers, scorpion spit)
- Magic system (staff, spells)
- Death penalty options (corpse run, item drops)
- Projectile physics for bow (arrow arc, stick in walls)
- Thrown weapons (spears, knives)

TECH DEBT (Carry Forward):
[ ] Critter visual extraction (reduce critter_spawner.gd from 1,143 lines)
[ ] ITEM_COLORS consolidation (remove duplication from inventory_ui.gd + container_ui.gd)
[ ] Container null safety (race condition if destroyed while UI open)
[ ] Input handling consolidation (player.gd uses duplicate input checks)
[ ] Cloud system extraction (day_night_cycle.gd is 829 lines)
[ ] Combat system extraction (player.gd will grow, consider separating combat logic)

NEXT SPRINT IDEAS (v0.7.0):
- Boss enemies (1 per biome, unique mechanics)
- Save/load system (HIGH PRIORITY)
- Progression gates (defeat boss to unlock next biome)
- Advanced enemy AI (smarter behaviors)
- Enemy variants (5-10 more types)
- Ranged enemy types
- Magic system (if fitting the theme)
- Advanced crafting (workbench, forge)
- Weapon/tool durability
- Death penalties (corpse run system)

========================================================================

PREVIOUS SPRINT: v0.5.0 "Atmosphere & Audio" (13/13 tasks - 100%) âœ… RELEASED
========================================================================

DESIGN DECISIONS (LOCKED):
âœ“ Music: Pure ambient drone (minimal, non-intrusive)
âœ“ Footsteps: Biome-aware (4 surfaces: grass/stone/sand/snow)
âœ“ Volume: Hybrid (realistic ambient, punchy actions)
âœ“ Music variety: Day/night variation (8 tracks total)
âœ“ Variation: Smart presets (none/subtle/moderate/strong per sound type)
âœ“ Balance: Optimized for cozy survival atmosphere
âœ“ Rumble: 5 presets with cooldowns (ready for settings integration)
âœ“ Version display: Settings menu shows current version

SPRINT v0.5.0 - COMPLETED TASKS:
[X] 1.1 - Audio Manager Architecture
[X] 1.2 - AI Sound Generation (48 files: 40 SFX + 8 music)
[X] 1.3 - Harvesting Sounds
[X] 2.1 - Movement Sounds (footsteps)
[X] 2.2 - Music Manager & AI Music
[X] 2.3 - Ambient Environmental Sounds
[X] 2.4 - Building Sounds
[X] 2.5 - Container Sounds
[X] 3.1 - UI Sounds (32 integration points)
[X] 3.2 - Settings Menu Audio Controls
[X] 3.3 - Sound Variation System (48 sounds configured)
[X] 3.4 - Audio Balance Pass (optimized category relationships)
[X] 3.5 - Controller Rumble (13 integration points)
      â†’ RumbleManager singleton created
      â†’ 5 rumble presets (light/medium/heavy/impact/footstep)
      â†’ Per-type cooldown system (prevents spam)
      â†’ Auto-detects controller connect/disconnect
      â†’ Scales by intensity + master volume
      â†’ Ready for settings UI integration

POST-RELEASE ADDITIONS:
[X] Version display in settings menu (bottom-right, auto-populated from project.godot)

SPRINT ACHIEVEMENTS:
âœ“ Complete audio system (48 sounds: 40 SFX + 8 music)
âœ“ Smart variation system (4 presets across all sounds)
âœ“ Balanced volume relationships (cozy atmosphere)
âœ“ Comprehensive haptic feedback (13 rumble points)
âœ“ Professional out-of-box experience
âœ“ Version tracking for releases

========================================================================

COMPLETED SPRINTS:
v0.5.0 (Dec 13, 2025) - Atmosphere & Audio (13/13 tasks - 100%) âœ…
v0.4.0 (Dec 12, 2025) - Storage & Organization (11/15 tasks - 73%)
v0.3.0 - Building & Crafting
v0.2.0 - World Generation
v0.1.0 - Foundation

---
Game: Low-poly survival (Valheim/Minecraft aesthetic)
Tone: Cozy loneliness with meditative gathering
Loop: Explore â†’ Gather â†’ Craft â†’ Fight â†’ Build â†’ Unlock biomes â†’ Repeat
Combat: First-person action (light/heavy/dodge + bow)
Enemies: 6 biome-specific types (primitives + AI textures)
Audio: 80 sounds total (48 ambient + 32 combat) with intelligent variation + haptic feedback
Polish: Professional feel with balanced audio/rumble/combat + version tracking
