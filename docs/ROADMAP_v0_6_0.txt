CRIMSON VEIL - ROADMAP

CURRENT: v0.6.0 "Hunter & Prey" (9/12 tasks - 75%) - SIMPLIFIED TO MINECRAFT-STYLE COMBAT
========================================================================================

PHASE 1 STATUS: ✅ COMPLETE (Tasks 1.1-1.2 finished - simplified combat foundation ready)
PHASE 2 STATUS: ✅ COMPLETE (Tasks 2.1-2.3 finished - all 6 enemies + spawning integration done)

DESIGN DECISIONS (LOCKED - UPDATED Dec 13, 2025):
✓ Combat Style: Simplified Minecraft-style Single-Shot Melee
✓ Attack Types: Simple click-to-attack (0.5s cooldown, no charging mechanics)
✓ Weapons: Melee only (wooden club, stone spear, bone sword) - NO bow for v0.6.0
✓ Enemies: 6 types across all biomes (primitives + AI textures)
✓ Enemy Roster: Corrupted Rabbit, Forest Goblin, Desert Scorpion, Ice Wolf, Stone Golem, Shadow Wraith
✓ Critters: Stay peaceful (no hostile variants)
✓ Controller: Full dual M+KB/gamepad support
✓ Controller Layout: Minecraft-style (A=Interact/Jump, B=Sprint, RT=Attack, RB=Cycle Weapon)
✓ UI Controls: ESC/B close all menus, movement blocked when any UI open
✓ Visual Style: CSG primitives + AI-generated textures
✓ Audio: 8 combat sounds via SFX Engine (player attacks only - simplified from 32)
✓ Death Penalty: Respawn at spawn, keep items (forgiving for v0.6.0)
✓ NO Dodge System: Removed for simplicity (was: dodge dash with i-frames)
✓ NO Bow System: Removed for v0.6.0 (may add in future update)
✓ NO Charging: Removed heavy attacks and charge mechanics

SPRINT v0.6.0 - TASKS (SIMPLIFIED):
[✅] 1.1 - Combat System Foundation (COMPLETE)
      → CombatSystem.gd created (~300 lines, simplified from 500+)
      → Weapon.gd resource class with static weapon definitions
      → Player.gd integration (combat_attack input only)
      → Camera shake system (0.3-0.5 intensity for attacks)
      → Rumble integration (light/medium presets for attacks)
      → Collision masking (Layer 9 for enemies)
      → Export parameters for tuning (attack cooldown, range, auto-aim)
      
[✅] 1.2 - Melee Attack System (COMPLETE - SIMPLIFIED)
      → Single-shot attack (RT/LMB tap, 0.5s cooldown)
      → NO charging mechanics (removed for simplicity)
      → Targeting: Raycast from camera with weapon-specific range
      → Auto-aim: 30° cone for controller (configurable in Inspector)
      → Crosshair: Simple 2-state (white=default, red=targeting)
      → CombatUI: Minimal (crosshair only, no charge bar/vignette)
      → Visual feedback: Camera shake + controller rumble on attacks
      → Inspector-editable parameters via @export
      
[❌] 1.3 - Dodge System (REMOVED)
      → Decided to keep combat simple like Minecraft
      → B button remapped to Sprint instead
      
[✅] 1.4 - Melee Weapons (COMPLETE - UNCHANGED)
      → Wooden Club: 15 dmg, 2.5m range, 1.0s cooldown (starter, equipped)
      → Stone Spear: 20 dmg, 3.5m range, 1.2s cooldown (wood×3, stone×2, leather×1)
      → Bone Sword: 25 dmg, 3.0m range, 1.0s cooldown (wood×2, bone×4)
      → Weapon switching: RB button cycles equipped weapons
      → Crafting recipes defined in Weapon.static methods
      
[❌] 1.5 - Bow & Arrow System (REMOVED)
      → Removed for v0.6.0 to keep combat simple
      → May add in future update if needed
      
[✅] 2.1 - Enemy Base Class (5h) - COMPLETE
      ✅ Enemy.gd extends CharacterBody3D (~270 lines)
      ✅ Health, damage, movement, detection systems
      ✅ State machine (Idle → Chase → Attack → Death)
      ✅ Drop table system (items on death)
      ✅ take_damage(amount) method for combat integration
      ✅ Collision Layer 9 + "enemies" group
      ✅ White flash damage feedback (0.1s)
      ✅ Death fade animation (0.5s)
      ✅ Tested and verified (7/9 core tests passed)
      ✅ Fixed combat_system.gd compatibility (simplified take_damage call)
      
[✅] 2.2 - Enemy Types (6 variants) (10h) - COMPLETE (6/6 done - 100%)
      ✅ Corrupted Rabbit (Forest, 30 HP, territorial, fast zigzag chase)
         → CSG geometry: brown body, pink ears, glowing red eyes, fluffy tail
         → Drops: corrupted_leather (100%), dark_meat (40%)
         → Behavior: Territorial (5m range), zigzag chase, quick attack (0.3s telegraph)
         → Tests: 8/8 passing (100%) - fully verified
      ✅ Forest Goblin (Forest, 50 HP, patrol/flee/coward AI)
         → CSG geometry: green body, yellow eyes, brown arms, stick weapon
         → Drops: wood (80%), stone (60%), goblin_tooth (30%)
         → Behavior: Patrols 3-5 waypoints, flees at <20% HP, backpedals when close
         → Tests: 9/9 passing (100%) - fully verified
      ✅ Desert Scorpion (Desert, 60 HP, ambush from sand) - COMPLETE
         → CSG geometry: sandy yellow segments, pincers, curved tail, stinger, stalked eyes
         → Drops: chitin (100%), venom_sac (25%)
         → Behavior: Starts buried, emerges at 8m, tail strike (0.5s telegraph), 30% re-burrow
         → Tests: 9/9 passing (100%) - fully verified
         → Special: Force-emerge on damage, position tweening for burrow/emerge
      ✅ Ice Wolf (Snow, 55 HP, pack tactics, spawns in groups of 2-3) - COMPLETE
         → CSG geometry: white body, head, 4 legs, bushy tail, glowing blue eyes
         → Drops: wolf_pelt (100%), fang (70%), ice_shard (15%)
         → Behavior: Pack formation via pack_id, howl before attack, surround player at 4m
         → Tests: 8/8 passing (100%) - fully verified
         → Special: Pack coordination, damage alerts pack members
      ✅ Stone Golem (Mountain, 100 HP, tank, ground slam AoE) - COMPLETE
         → CSG geometry: large stone body, thick arms, sturdy legs, glowing orange eyes, cracks
         → Drops: stone (100%, 3-5 pieces), iron_ore (60%), stone_core (20%)
         → Behavior: Slow tank, patrols stone nodes, ground slam (1s telegraph, 3m AoE, 2s stagger)
         → Tests: 8/8 passing (100%) - fully verified
         → Special: AoE damage, stagger state, stone resource patrol
      ✅ Shadow Wraith (Night-only, 40 HP, ethereal, floats, despawns at dawn) - COMPLETE
         → CSG geometry: dark purple cylinder body, featureless sphere head, wispy particle trail
         → Drops: shadow_essence (80%), ectoplasm (30%)
         → Behavior: Night-only spawn (10 PM-6 AM), floats 1.5m above terrain, phases through terrain
         → Tests: 9/9 passing (100%) - fully verified
         → Special: collision_mask=0 (phase-through), dawn despawn with fade, transparent material (alpha 0.6)
      → Automated test suites created for all 6 enemies (100% pass rate)
      → Audio integration points marked (TODO for Task 3.1)
      
[✅] 2.3 - Enemy AI & Spawning (3h) - COMPLETE
      ✅ Chase AI (move toward player, maintain range)
      ✅ Attack patterns (telegraph → strike → cooldown)
      ✅ Pack behavior (Ice Wolves coordinate via pack_id)
      ✅ Biome-specific spawning (integrated into CritterSpawner)
      ✅ Time-based spawning (Shadow Wraith night-only: 10 PM-6 AM)
      ✅ Spawn rates configured per biome:
         → Forest: Corrupted Rabbit (15%)
         → Snow: Ice Wolf pack (10%, spawns 2-3 wolves)
         → Mountain: Stone Golem (5%)
         → All biomes (night): Shadow Wraith (8%)
      ✅ Minimum spawn distance: 15m from player
      ✅ Pack spawning: Triangle formation with shared pack_id
      ✅ Separate enemy tracking (active_enemies array, no meta data conflicts)
      ✅ Automated test suite: 6/6 tests passing (100%)
      
[ ] 3.1 - Combat Audio Generation (2h - REDUCED FROM 3h)
      → Generate 8 sounds via SFX Engine (reduced from 32)
      → Player combat: swing_light, swing_medium, swing_heavy, hit_flesh, hit_stone, player_grunt_1, player_grunt_2, player_death
      → NO bow sounds (removed)
      → NO dodge sounds (removed)
      → Enemy sounds moved to separate task (6 enemies × 4 sounds = 24)
      → Integration with AudioManager variation system
      → Configure sound categories and volumes
      
[ ] 3.2 - AI Texture Generation (2h - UNCHANGED)
      → Generate 5 enemy textures via Leonardo.ai/DALL-E
      → Corrupted fur (dark red-brown, diseased)
      → Goblin skin (mottled green, rough)
      → Scorpion chitin (sandy yellow, segmented)
      → Wolf fur (white, icy blue tint, frost)
      → Stone with magma (gray, orange glowing cracks)
      → Apply to CSG primitive materials
      → Configure texture filtering (nearest for pixel art look)
      
[ ] 3.3 - Visual Effects & Feedback (2h - SIMPLIFIED)
      → Hit particles (burst at impact point, color-coded by enemy)
      → Crosshair feedback (flash on hit)
      → Screen flash (red when taking damage)
      → Death fade (enemies dissolve over 0.5s)
      → Camera shake presets (light/medium for different weapons)
      → NO charge vignette (removed)
      → NO charge bar (removed)
      
[ ] 4.1 - Player Death & Respawn (2h - UNCHANGED)
      → Death detection (health <= 0 in HealthHungerSystem)
      → Death screen UI ("YOU DIED" + respawn button)
      → Respawn at world spawn (0, Y, 0)
      → Full health/hunger restoration
      → Keep all items (forgiving for now)
      → Death sound + fade to black effect
      
[ ] 4.2 - Combat Polish & Balance (2h)
      → Enemy sounds generation (24 sounds - moved from 3.1)
      → Combat rumble presets finalized
      → Button hints UI (auto-switch M+KB vs controller)
      → Final balance pass (damage numbers, enemy HP, cooldowns)
      → Testing with all 6 enemy types
      → Performance optimization

TOTAL ESTIMATED TIME: ~32 hours (reduced from 48 hours due to simplification)
COMPLETED: ~28 hours (88%)
REMAINING: ~4 hours (12%)

TASK BREAKDOWN:
Phase 1 - Combat Core: Tasks 1.1-1.2 (8h) ✅ COMPLETE - Simple attack system
Phase 2 - Enemies: Tasks 2.1-2.3 (18h) ✅ COMPLETE - Enemy class, 6 types, AI/spawning
Phase 3 - Audio & Visual: Tasks 3.1-3.3 (6h) - Sounds, textures, effects
Phase 4 - Integration: Tasks 4.1-4.2 (4h) - Death system, polish

CHANGES FROM ORIGINAL PLAN:
- ❌ Removed charging mechanics (was: hold 1.5s for heavy attack)
- ❌ Removed dodge system (was: B button dash with i-frames)
- ❌ Removed bow & arrow (was: charge-based ranged weapon)
- ✅ Simplified to Minecraft-style click-to-attack
- ✅ B button now = Sprint (was: Dodge)
- ✅ Reduced from 32 sounds to 8 player sounds + 24 enemy sounds
- ✅ Simplified UI (crosshair only, no charge indicators)
- ✅ All combat parameters now configurable via Inspector (@export)

SPRINT ACHIEVEMENTS (Target):
✅ Complete simplified combat system (melee only)
✅ 6 enemy types across all biomes (6/6 complete - 100%)
✅ Full controller support (simplified layout)
⏳ 32 combat sounds (8 player + 24 enemy)
⏳ AI-textured enemies (5 unique textures)
⏳ Death/respawn system
✅ Minecraft-like combat feel (simple, responsive)
✅ Enemy spawning integration (biome-specific + night-only)
✅ Pack behavior (Ice Wolves)
✅ Special mechanics (burrow, slam, phase-through, night-only)

RECENT COMPLETION (Dec 14, 2025):
✅ Stone Golem - Tank enemy with ground slam AoE attack
   - 8/8 automated tests passing (100%)
   - Ground slam: 1s telegraph, 3m AoE damage, 2s stagger
   - Stone node patrol behavior
   - CSG primitives: large stone body with glowing orange eyes
✅ Shadow Wraith - Night-only ethereal enemy
   - 9/9 automated tests passing (100%)
   - Night-only spawning (10 PM - 6 AM), dawn despawn with fade
   - Floating 1.5m above terrain, phase-through collision
   - Transparent material (alpha 0.6) with wispy particle trail
✅ Enemy Spawning Integration - Complete biome and time-based system
   - 6/6 automated tests passing (100%)
   - Biome-specific spawn rates (Forest 15%, Snow 10%, Mountain 5%, Night 8%)
   - Pack spawning for Ice Wolves (2-3 per spawn with shared pack_id)
   - Minimum 15m spawn distance from player
   - Separate enemy tracking (no critter meta data conflicts)

PREVIOUS COMPLETIONS:
✅ Desert Scorpion - Ambush predator with burrow/emerge mechanics (Dec 13)
✅ Ice Wolf - Pack hunter with coordination AI (Dec 13)
✅ Forest Goblin - Patrol/flee/coward AI (Dec 12)
✅ Corrupted Rabbit - Territorial zigzag chaser (Dec 12)

NEXT UP (PHASE 3 - Audio & Visual):
⏳ Task 3.1 - Combat Audio Generation (8 player sounds via SFX Engine)
⏳ Task 3.2 - AI Texture Generation (5 enemy textures via Leonardo.ai)
⏳ Task 3.3 - Visual Effects & Feedback (hit particles, screen flash, death fade)